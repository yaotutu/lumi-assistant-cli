2025-09-03 16:19:38 [WARNING] src.utils.config.config_manager: 配置文件不存在: /Users/yaotutu/Desktop/code/py-xiaozhi/src/config/config.json
2025-09-03 16:19:38 [INFO] src.utils.config.config_manager: 已创建默认配置文件: /Users/yaotutu/Desktop/code/py-xiaozhi/src/config/config.json
2025-09-03 16:19:38 [INFO] src.utils.config.config_manager: 配置文件加载成功: /Users/yaotutu/Desktop/code/py-xiaozhi/src/config/config.json
2025-09-03 16:19:55 [INFO] src.utils.config.config_manager: 配置文件加载成功: /Users/yaotutu/Desktop/code/py-xiaozhi/config/config.json
2025-09-03 16:19:56 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 16:19:56 [ERROR] __main__: TTS初始化错误: No module named 'src.utils.audio_player'
Traceback (most recent call last):
  File "/Users/yaotutu/Desktop/code/py-xiaozhi/main.py", line 173, in init_tts
    from src.utils.audio_player import AudioPlayer
ModuleNotFoundError: No module named 'src.utils.audio_player'
2025-09-03 16:19:58 [ERROR] __main__: 主程序错误: EOF when reading a line
Traceback (most recent call last):
  File "/Users/yaotutu/Desktop/code/py-xiaozhi/main.py", line 382, in <module>
    asyncio.run(main())
  File "/Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/Users/yaotutu/Desktop/code/py-xiaozhi/main.py", line 344, in main
    cmd = input().strip().lower()
EOFError: EOF when reading a line
2025-09-03 16:20:45 [INFO] src.utils.config.config_manager: 配置文件加载成功: /Users/yaotutu/Desktop/code/py-xiaozhi/config/config.json
2025-09-03 16:20:45 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 16:20:45 [ERROR] __main__: 主程序错误: EOF when reading a line
Traceback (most recent call last):
  File "/Users/yaotutu/Desktop/code/py-xiaozhi/main.py", line 382, in <module>
    asyncio.run(main())
  File "/Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/Users/yaotutu/Desktop/code/py-xiaozhi/main.py", line 344, in main
    cmd = input().strip().lower()
EOFError: EOF when reading a line
2025-09-03 16:23:22 [INFO] src.utils.config.config_manager: 配置文件加载成功: /Users/yaotutu/Desktop/code/py-xiaozhi/config/config.json
2025-09-03 16:23:22 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 16:23:43 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 16:38:49 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 16:38:49 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-03 16:38:49 [WARNING] src.interfaces.cli_interface: 检测到EOF，程序退出
2025-09-03 16:38:49 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-03 16:39:00 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 16:39:00 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-03 16:39:00 [WARNING] src.interfaces.cli_interface: 检测到EOF，程序退出
2025-09-03 16:39:01 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-03 16:39:48 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 16:39:48 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-03 16:39:48 [WARNING] src.interfaces.cli_interface: 检测到EOF，程序退出
2025-09-03 16:39:48 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-03 16:43:29 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 16:43:29 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-03 16:43:29 [WARNING] src.interfaces.cli_interface: 检测到EOF，程序退出
2025-09-03 16:43:29 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-03 16:45:33 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 16:45:33 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-03 16:45:34 [ERROR] src.interfaces.cli_interface: CLI界面错误: StartListeningEvent.__init__() got an unexpected keyword argument 'source'
2025-09-03 16:46:27 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 16:46:27 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-03 16:46:27 [WARNING] src.interfaces.cli_interface: 检测到EOF，程序退出
2025-09-03 16:46:27 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-03 17:32:05 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 17:32:05 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-03 17:32:11 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 20:35:03 [INFO] openai._base_client: Retrying request to /chat/completions in 0.475444 seconds
2025-09-03 20:35:04 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 20:35:04 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-03 20:35:04 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-03 20:38:24 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 20:38:29 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-03 20:38:33 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 20:38:51 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 20:39:12 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-03 20:39:14 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 20:39:15 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-03 20:39:29 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-03 20:40:21 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-04 10:21:05 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 10:21:07 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-04 10:21:12 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 10:21:37 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-04 10:34:39 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 10:34:41 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-04 10:34:41 [WARNING] src.interfaces.cli.cli_interface: 检测到EOF，程序退出
2025-09-04 10:34:41 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-04 10:36:08 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 10:36:11 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-04 10:36:19 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 16:07:21 [ERROR] src.core.service_manager: LLM初始化错误: AsyncClient.__init__() got an unexpected keyword argument 'proxies'
Traceback (most recent call last):
  File "/Users/yaotutu/Desktop/code/lumi-assistant/src/core/service_manager.py", line 203, in init_llm
    self.llm = EnhancedLLM(llm_config)
  File "/Users/yaotutu/Desktop/code/lumi-assistant/src/llm/enhanced_llm.py", line 29, in __init__
    super().__init__(config)
  File "/Users/yaotutu/Desktop/code/lumi-assistant/src/llm/openai_llm.py", line 46, in __init__
    self.client = AsyncOpenAI(
  File "/Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/site-packages/openai/_client.py", line 334, in __init__
    super().__init__(
  File "/Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/site-packages/openai/_base_client.py", line 1406, in __init__
    self._client = http_client or AsyncHttpxClientWrapper(
  File "/Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/site-packages/openai/_base_client.py", line 1303, in __init__
    super().__init__(**kwargs)
TypeError: AsyncClient.__init__() got an unexpected keyword argument 'proxies'
2025-09-04 16:07:21 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-04 16:07:35 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-04 16:07:35 [ERROR] asyncio: Task exception was never retrieved
future: <Task finished name='Task-2' coro=<AsyncClient.aclose() done, defined at /Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/site-packages/httpx/_client.py:1978> exception=AttributeError("'AsyncHttpxClientWrapper' object has no attribute '_state'")>
Traceback (most recent call last):
  File "/Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/site-packages/httpx/_client.py", line 1982, in aclose
    if self._state != ClientState.CLOSED:
AttributeError: 'AsyncHttpxClientWrapper' object has no attribute '_state'
2025-09-04 16:07:38 [ERROR] src.core.service_manager: LLM初始化错误: AsyncClient.__init__() got an unexpected keyword argument 'proxies'
Traceback (most recent call last):
  File "/Users/yaotutu/Desktop/code/lumi-assistant/src/core/service_manager.py", line 203, in init_llm
    self.llm = EnhancedLLM(llm_config)
  File "/Users/yaotutu/Desktop/code/lumi-assistant/src/llm/enhanced_llm.py", line 29, in __init__
    super().__init__(config)
  File "/Users/yaotutu/Desktop/code/lumi-assistant/src/llm/openai_llm.py", line 46, in __init__
    self.client = AsyncOpenAI(
  File "/Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/site-packages/openai/_client.py", line 334, in __init__
    super().__init__(
  File "/Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/site-packages/openai/_base_client.py", line 1406, in __init__
    self._client = http_client or AsyncHttpxClientWrapper(
  File "/Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/site-packages/openai/_base_client.py", line 1303, in __init__
    super().__init__(**kwargs)
TypeError: AsyncClient.__init__() got an unexpected keyword argument 'proxies'
2025-09-04 16:07:39 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-04 16:09:37 [ERROR] src.core.service_manager: LLM初始化错误: AsyncClient.__init__() got an unexpected keyword argument 'proxies'
Traceback (most recent call last):
  File "/Users/yaotutu/Desktop/code/lumi-assistant/src/core/service_manager.py", line 203, in init_llm
    self.llm = EnhancedLLM(llm_config)
  File "/Users/yaotutu/Desktop/code/lumi-assistant/src/llm/enhanced_llm.py", line 29, in __init__
    super().__init__(config)
  File "/Users/yaotutu/Desktop/code/lumi-assistant/src/llm/openai_llm.py", line 38, in __init__
    http_client = httpx.AsyncClient(
TypeError: AsyncClient.__init__() got an unexpected keyword argument 'proxies'
2025-09-04 16:09:37 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-04 16:09:37 [WARNING] src.interfaces.cli.cli_interface: 检测到EOF，程序退出
2025-09-04 16:09:37 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-04 16:14:02 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 16:14:02 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-04 16:14:02 [WARNING] src.interfaces.cli.cli_interface: 检测到EOF，程序退出
2025-09-04 16:14:02 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-04 16:14:45 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-04 16:14:45 [ERROR] asyncio: Task exception was never retrieved
future: <Task finished name='Task-2' coro=<AsyncClient.aclose() done, defined at /Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/site-packages/httpx/_client.py:1978> exception=AttributeError("'AsyncHttpxClientWrapper' object has no attribute '_state'")>
Traceback (most recent call last):
  File "/Users/yaotutu/.pyenv/versions/3.10.13/lib/python3.10/site-packages/httpx/_client.py", line 1982, in aclose
    if self._state != ClientState.CLOSED:
AttributeError: 'AsyncHttpxClientWrapper' object has no attribute '_state'
2025-09-04 16:14:46 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 16:14:52 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-04 16:14:53 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-04 16:25:36 [ERROR] src.core.service_manager: ASR初始化错误: No module named 'requests'
Traceback (most recent call last):
  File "/Users/yaotutu/Desktop/code/lumi-assistant/src/core/service_manager.py", line 155, in init_asr
    from src.asr.aliyun_asr import AliyunASRClient, AliyunASRConfig
  File "/Users/yaotutu/Desktop/code/lumi-assistant/src/asr/__init__.py", line 10, in <module>
    from .aliyun_asr import AliyunASRClient
  File "/Users/yaotutu/Desktop/code/lumi-assistant/src/asr/aliyun_asr.py", line 18, in <module>
    import requests
ModuleNotFoundError: No module named 'requests'
2025-09-04 16:26:06 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 16:26:06 [INFO] src.core.audio_manager: 音频系统初始化成功
2025-09-04 16:26:06 [WARNING] src.interfaces.cli.cli_interface: 检测到EOF，程序退出
2025-09-04 16:26:06 [INFO] src.core.audio_manager: 音频资源已清理
2025-09-04 16:27:54 [INFO] httpx: HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 16:27:56 [INFO] src.core.audio_manager: 音频系统初始化成功
